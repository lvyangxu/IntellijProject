{"version":3,"sources":["index.es6"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by karl on 2016/7/22.\r\n */\r\nlet recaptchaStr = \"\";\r\nlet setRecaptcha = (d)=> {\r\n    recaptchaStr = d;\r\n}\r\n\r\n{\r\n\r\n\r\n    $(\".slick\").slick();\r\n\r\n    $(document).ready(()=> {\r\n        let bannerH = $(window).width()*0.54;\r\n        $(\".banner\").children(\".container\").css({\r\n            \"margin-top\":-bannerH * 0.55+40+\"px\"\r\n        });\r\n        \r\n        if($(window).width()>768){\r\n            $(\".order\").css({\r\n                \"height\":$(\"video\").height()\r\n            });\r\n        }else{\r\n            $(\".order\").css({\r\n                \"height\":\"auto\"\r\n            });\r\n        }\r\n    });\r\n\r\n    $(window).resize(function () {\r\n        let bannerH = $(window).width()*0.54;\r\n        $(\".banner\").children(\".container\").css({\r\n            \"margin-top\":-bannerH * 0.55+\"px\"\r\n        });\r\n        if($(window).width()>768){\r\n            $(\".order\").css({\r\n                \"height\":$(\"video\").height()\r\n            });\r\n        }else{\r\n            $(\".order\").css({\r\n                \"height\":\"auto\"\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    let channel = \"\";\r\n    let param = window.location.search.substr(1);\r\n    let channelStr = param.split(\"&\").find(d=> {\r\n        return (d.split(\"=\")[0] == \"utm_source\");\r\n    });\r\n    if (channelStr != undefined) {\r\n        channel = channelStr.split(\"=\")[1];\r\n    }\r\n\r\n    $(\"video\").delegate(\"\", \"click\", function () {\r\n        $(this)[0].play();\r\n    });\r\n\r\n    $(\".email input\").delegate(\"\", \"input\", function () {\r\n        let email = $(\".email input\").val();\r\n        let regex = /[^@]+@.+\\..+/;\r\n        if (email.match(regex) == null) {\r\n            $(\".email input\").css({\r\n                \"border-color\": \"red\"\r\n            });\r\n        } else {\r\n            $(\".email input\").css({\r\n                \"border-color\": \"rgba(250,237,220,1)\"\r\n            });\r\n        }\r\n    });\r\n\r\n    $(\".submit img\").delegate(\"\", \"click\", function () {\r\n        let email = $(\".email input\").val();\r\n        let regex = /[^@]+@.+\\..+/;\r\n\r\n        if (email.match(regex) == null) {\r\n            alert(\"your email format is not correct\");\r\n            return;\r\n        }\r\n        if (recaptchaStr == \"\") {\r\n            alert(\"please complete the recaptcha first\");\r\n            return;\r\n        }\r\n\r\n        email = new myString(email).base64UrlEncode().value;\r\n        recaptchaStr = new myString(recaptchaStr).base64UrlEncode().value;\r\n\r\n\r\n        let requestData = \"email=\" + email + \"&recaptcha=\" + recaptchaStr + \"&channel=\" + channel;\r\n        http.doAjaxInJquery(\"../Reserve/Check\", \"post\", 30, requestData, result=> {\r\n            let json = new myString(result).toJson();\r\n            if (json.success == \"true\") {\r\n                ga('send', {\r\n                    hitType: 'event',\r\n                    eventCategory: 'Order',\r\n                    eventAction: 'Order Success',\r\n                    eventLabel: 'Email Order'\r\n                });\r\n                $(\".order\").children(\".content\").children(\".before\").hide();\r\n                $(\".order\").children(\".content\").children(\".after\").html(\"<div class='orderText'>Заказ прошел успешно! Код подар\" +\r\n                    \"ка будет отправлен вам на почту. Его можно будет использовать в и\" +\r\n                    \"гре, чтобы получить специальную награду.</div>\");\r\n                $(\".orderText\").css({\r\n                    \"margin-bottom\":($(\".order\").height()-$(\".orderText\").height())/2+\"px\"\r\n                });\r\n            } else {\r\n                if (json.message == \"reserved\") {\r\n                    $(\".order\").children(\".content\").children(\".before\").hide();\r\n                    $(\".order\").children(\".content\").children(\".after\").html(\"<div class='orderText'>Вы уже заказали.</div>\");\r\n                } else {\r\n                    alert(\"Заказ прошел неуспешно! Пожалуйста закажите еще раз.\");\r\n                    console.log(\"reserve failed:\" + json.message);\r\n                }\r\n            }\r\n        }, result=> {\r\n            alert(\"network error\");\r\n        });\r\n    });\r\n}\r\n\r\n"]}