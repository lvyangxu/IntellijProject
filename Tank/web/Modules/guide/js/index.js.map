{"version":3,"sources":["index.es6"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by karl on 2016/7/22.\r\n */\r\n{\r\n    let articleText2 = [];\r\n\r\n\r\n    http.doAjaxInJquery(\"../Table/guide/Read\", \"post\", 30, \"\", result=> {\r\n        let json = new myString(result).toJson();\r\n        if (json.success == \"true\") {\r\n            let data = json.message;\r\n\r\n            let currentPage = 0;\r\n            let start = 0;\r\n            let rouPerPage = 4;\r\n            let end = Math.floor((data.length - 1) / rouPerPage);\r\n\r\n            let drawArticle = ()=> {\r\n                //draw first five article\r\n                let displayData = data.map((d,i)=> {\r\n                    let id = d.name.replace(\"guide\", \"\");\r\n                    let content = d.content;\r\n                    content = content.replace(/\\{img:[^{}]+}/g, \"\");\r\n\r\n                    let maxLength = 600;\r\n                    if ($(window).width() < 768 && $(window).width() >= 480) {\r\n                        maxLength = 100;\r\n                    } else if($(window).width() < 480){\r\n                        maxLength = 50;\r\n                    }\r\n                    content = (content.length > maxLength) ? (content.substr(0, maxLength) + \"...\") : content;\r\n                    let rowHtml = \"<div class='article'><a href='../detail/?name=\" + d.name + \"'><div class='left'>\";\r\n                    rowHtml += \"<img src='../home/image/guideImage\" + id + \".png'>\";\r\n                    rowHtml += \"</div><div class='right'>\";\r\n                    rowHtml += \"<div class='text1'>\" + d.title + \"</div>\";\r\n                    rowHtml += \"<div class='text2'>\" + content + \"</div>\";\r\n                    rowHtml += \"</div></a></div>\";\r\n                    return rowHtml;\r\n                }).slice(currentPage * rouPerPage, currentPage * rouPerPage + rouPerPage);\r\n                $(\".middle\").children(\".container\").html(displayData.slice(0, 3).join(\"\"));\r\n                $(\".foot\").children(\".container\").html(displayData.slice(3, rouPerPage).join(\"\"));\r\n            }\r\n\r\n            let drawPagination = ()=> {\r\n                //draw pagination\r\n                $(\".foot\").children(\".container\").append(()=> {\r\n                    let pageStart, pageEnd;\r\n                    if (currentPage - 2 >= start) {\r\n                        pageStart = currentPage - 2;\r\n                        if (currentPage + 1 <= end) {\r\n                            pageEnd = currentPage + 1;\r\n                        } else {\r\n                            pageEnd = end;\r\n                            if (pageEnd - 3 >= 0) {\r\n                                pageStart = pageEnd - 3;\r\n                            } else {\r\n                                pageStart = start;\r\n                            }\r\n\r\n                        }\r\n                    } else {\r\n                        pageStart = start;\r\n                        if (pageStart + 3 <= end) {\r\n                            pageEnd = pageStart + 3;\r\n                        } else {\r\n                            pageEnd = end;\r\n                        }\r\n                    }\r\n\r\n\r\n                    let paginationHtml = \"<div class='pagination'>\";\r\n                    paginationHtml += \"<button class='start'> << В начало</button>\";\r\n                    paginationHtml += \"<button class='prev'><</button>\";\r\n\r\n                    for (let i = pageStart; i <= pageEnd; i++) {\r\n                        let classHtml = (i == currentPage) ? \" active\" : \"\";\r\n                        paginationHtml += \"<button class='number\" + classHtml + \"'>\" + (i + 1) + \"</button>\";\r\n                    }\r\n                    paginationHtml += \"<button class='next'>></button>\";\r\n                    paginationHtml += \"<button class='end'>До конца >> </button>\";\r\n                    paginationHtml += \"</div>\";\r\n                    return paginationHtml;\r\n                });\r\n\r\n                //delegate pagination button\r\n                $(\".pagination\").children(\"button\").delegate(\"\", \"click\", function () {\r\n                    if ($(this).hasClass(\"start\")) {\r\n                        currentPage = 0;\r\n                    }\r\n                    if ($(this).hasClass(\"end\")) {\r\n                        currentPage = end;\r\n                    }\r\n                    if ($(this).hasClass(\"prev\")) {\r\n                        if (currentPage > 0) {\r\n                            currentPage--;\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if ($(this).hasClass(\"next\")) {\r\n                        if (currentPage < end) {\r\n                            currentPage++;\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if($(this).hasClass(\"number\")){\r\n                        currentPage = Number.parseInt($(this).text())-1;\r\n                    }\r\n                    drawArticle();\r\n                    drawPagination();\r\n                });\r\n            }\r\n\r\n            drawArticle();\r\n            drawPagination();\r\n\r\n\r\n\r\n        }\r\n    }, result=> {\r\n        alert(\"network error:\" + result);\r\n    });\r\n\r\n\r\n\r\n    let setFoot = ()=> {\r\n        if ($(window).width() < 768 && $(window).width() >= 480) {\r\n            $(\".article\").children(\"a\").children(\".right\").children(\".text2\").each(function (index) {\r\n                let short = $(this).text().substr(0, 100) + \"...\";\r\n                $(this).text(short);\r\n            });\r\n        } else if($(window).width() < 480){\r\n            $(\".article\").children(\"a\").children(\".right\").children(\".text2\").each(function (index) {\r\n                let short = $(this).text().substr(0, 50) + \"...\";\r\n                $(this).text(short);\r\n            });\r\n        } else {\r\n            $(\".article\").children(\"a\").children(\".right\").children(\".text2\").each(function (index) {\r\n                $(this).html(articleText2[index]);\r\n            });\r\n        }\r\n\r\n        $(\".foot2\").height();\r\n    };\r\n\r\n    $(window).resize(()=> {\r\n        setFoot();\r\n    });\r\n\r\n}"]}