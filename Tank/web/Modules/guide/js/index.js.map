{"version":3,"sources":["index.es6"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by karl on 2016/7/22.\r\n */\r\n{\r\n    http.doAjaxInJquery(\"../Table/guide/Read\", \"post\", 30, \"\", result=> {\r\n        let json = new myString(result).toJson();\r\n        if (json.success == \"true\") {\r\n            let data = json.message;\r\n\r\n            let currentPage = 0;\r\n            let start = 0;\r\n            let end = Math.floor((data.length - 1) / 5);\r\n\r\n            let drawArticle = ()=> {\r\n                //draw first five article\r\n                let displayData = data.map(d=> {\r\n                    let id = d.name.replace(\"guide\", \"\");\r\n                    let content = d.content;\r\n                    content = content.replace(/\\{img:[^{}]+}/g, \"\");\r\n                    content = (content > 200) ? (content.substr(0, 200) + \"...\") : content;\r\n                    let rowHtml = \"<div class='article'><a href='../detail/?name=\" + d.name + \"'><div class='left'>\";\r\n                    rowHtml += \"<img src='../Images/manage/guide\" + id + \"_0.png'>\";\r\n                    rowHtml += \"</div><div class='right'>\";\r\n                    rowHtml += \"<div class='text1'>\" + d.title + \"</div>\";\r\n                    rowHtml += \"<div class='text2'>\" + content + \"</div>\";\r\n                    rowHtml += \"</div></a></div>\";\r\n                    return rowHtml;\r\n                }).slice(currentPage * 5, currentPage * 5 + 5);\r\n                $(\".middle\").children(\".container\").html(displayData.slice(0, 3).join(\"\"));\r\n                $(\".foot\").children(\".container\").html(displayData.slice(3, 5).join(\"\"));\r\n            }\r\n\r\n            let drawPagination = ()=> {\r\n                //draw pagination\r\n                $(\".foot\").children(\".container\").append(()=> {\r\n                    let pageStart, pageEnd;\r\n                    if (currentPage - 2 >= start) {\r\n                        pageStart = currentPage - 2;\r\n                        if (currentPage + 1 <= end) {\r\n                            pageEnd = currentPage + 1;\r\n                        } else {\r\n                            pageEnd = end;\r\n                            if (pageEnd - 3 >= 0) {\r\n                                pageStart = pageEnd - 3;\r\n                            } else {\r\n                                pageStart = start;\r\n                            }\r\n\r\n                        }\r\n                    } else {\r\n                        pageStart = start;\r\n                        if (pageStart + 3 <= end) {\r\n                            pageEnd = pageStart + 3;\r\n                        } else {\r\n                            pageEnd = end;\r\n                        }\r\n                    }\r\n\r\n\r\n                    let paginationHtml = \"<div class='pagination'>\";\r\n                    paginationHtml += \"<button class='start'> << First</button>\";\r\n                    paginationHtml += \"<button class='prev'><</button>\";\r\n\r\n                    for (let i = pageStart; i <= pageEnd; i++) {\r\n                        let classHtml = (i == currentPage) ? \" active\" : \"\";\r\n                        paginationHtml += \"<button class='number\" + classHtml + \"'>\" + (i + 1) + \"</button>\";\r\n                    }\r\n                    paginationHtml += \"<button class='next'>></button>\";\r\n                    paginationHtml += \"<button class='end'>Last >> </button>\";\r\n                    paginationHtml += \"</div>\";\r\n                    return paginationHtml;\r\n                });\r\n\r\n                //delegate pagination button\r\n                $(\".pagination\").children(\"button\").delegate(\"\", \"click\", function () {\r\n                    if ($(this).hasClass(\"start\")) {\r\n                        currentPage = 0;\r\n                    }\r\n                    if ($(this).hasClass(\"end\")) {\r\n                        currentPage = end;\r\n                    }\r\n                    if ($(this).hasClass(\"prev\")) {\r\n                        if (currentPage > 0) {\r\n                            currentPage--;\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if ($(this).hasClass(\"next\")) {\r\n                        if (currentPage < end) {\r\n                            currentPage++;\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if($(this).hasClass(\"number\")){\r\n                        currentPage = Number.parseInt($(this).text())-1;\r\n                    }\r\n                    drawArticle();\r\n                    drawPagination();\r\n                });\r\n            }\r\n\r\n            drawArticle();\r\n            drawPagination();\r\n\r\n\r\n        }\r\n    }, result=> {\r\n        alert(\"network error:\" + result);\r\n    });\r\n}"]}