{"version":3,"sources":["index.es6"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["{\r\n    //load text\r\n    let selectors = [\".top button\", \"game-div>.title\", \"game1 .name\", \"game2 .name\", \"game3 .name\", \"game4 .name\",\r\n        \".address>.title\", \".address>.left>.button\", \".address .left p\", \".address>.right>.button\", \".address .right p\",\".recruit-content .small\"];\r\n    let names = [\"top-button\", \"games-title\", \"game1-title\", \"game2-title\", \"game3-title\", \"game4-title\",\r\n        \"address-title\", \"left-title\", \"left-paragraph\", \"right-title\", \"right-paragraph\",\"recruit-content\"];\r\n    let page = \"join-us\";\r\n    loadText(page, selectors, names);\r\n    switchLanguage(()=> {\r\n        loadText(page, selectors, names);\r\n    });\r\n\r\n    //job detail\r\n    $(\".recruit-table\").children(\"table\").children(\"tbody\").children(\"tr\").children(\"td:not([colspan=4])\").delegate(\"\", \"click\", function () {\r\n        $(this).parent().next().children(\"td[colspan=4]\").toggle();\r\n    });\r\n\r\n    //open resume form\r\n    $(\".recruit-table .submit button\").delegate(\"\", \"click\", function () {\r\n        $(\".resume-div\").css({\r\n            \"left\": ($(window).width() - 300) / 2,\r\n            \"top\": ($(window).height() - 300) / 2\r\n        })\r\n        $(\".resume-div\").show();\r\n        $(\".resume-div .position .right\").text($(this).parent().parent().parent().prev().children(\"td:first\").text());\r\n    });\r\n\r\n    //select attachment\r\n    $(\".resume-div .attachment button\").delegate(\"\", \"click\", ()=> {\r\n        $(\".resume-div .attachment input\").click();\r\n    });\r\n\r\n    //listen attachment change\r\n    $(\".resume-div .attachment input\").delegate(\"\", \"change\", function () {\r\n        let file = this.files[0];\r\n        if (file == undefined) {\r\n            $(\".resume-div .attachment button\").text(\"点此添加你的简历\");\r\n            $(\".resume-div .attachment button\").css({\r\n                \"border\": \"1px solid red\"\r\n            });\r\n            return;\r\n        }\r\n        let displayName = (file.name.length >= 15) ? (file.name.substr(0, 15) + \"...\") : file.name;\r\n        $(\".resume-div .attachment button\").text(displayName);\r\n        $(\".resume-div .attachment button\").css({\r\n            \"border\": \"1px solid rgba(165,199,254,1)\"\r\n        });\r\n    });\r\n\r\n    //listen input change\r\n    $(\".resume-div .name input,.resume-div .phone input\").delegate(\"\", \"change\", function () {\r\n        if ($(this).val() == \"\") {\r\n            $(this).css({\r\n                \"border\": \"1px solid red\"\r\n            });\r\n        } else {\r\n            $(this).css({\r\n                \"border\": \"1px solid rgba(165,199,254,1)\"\r\n            });\r\n        }\r\n    });\r\n\r\n    $(\".resume-div .close i\").delegate(\"\",\"click\",function () {\r\n        $(\".resume-div\").hide();\r\n    });\r\n\r\n    //send resume\r\n    $(\".resume-div .send button\").delegate(\"\", \"click\", function () {\r\n        let positionText = $(\".resume-div .position .right\");\r\n        let nameInput = $(\".resume-div .name input\");\r\n        let phoneInput = $(\".resume-div .phone input\");\r\n        let statusText = $(\".resume-div .status .right\");\r\n        let attachmentInput = $(\".resume-div .attachment input\");\r\n\r\n        //form check\r\n        if (nameInput.val() == \"\") {\r\n            nameInput.focus();\r\n            return;\r\n        }\r\n        if (phoneInput.val() == \"\") {\r\n            phoneInput.focus();\r\n            return;\r\n        }\r\n        if(attachmentInput[0].files[0]==undefined){\r\n            attachmentInput.focus();\r\n            return;\r\n        }\r\n        if(nameInput.val().length>10){\r\n            alert(\"名字太长了\");\r\n            return;\r\n        }\r\n\r\n        let phoneRegex = new RegExp(/^\\d{11}$/g);\r\n        if(!phoneRegex.test(phoneInput.val())){\r\n            phoneInput.focus();\r\n            alert(\"输入的手机号不正确\");\r\n            return;\r\n        }\r\n\r\n        let requestData = \"position=\" + new myString(positionText.text()).base64UrlEncode().value;\r\n        requestData += \"&name=\" + new myString(nameInput.val()).base64UrlEncode().value;\r\n        requestData += \"&phone=\" + new myString(phoneInput.val()).base64UrlEncode().value;\r\n        let uploadFile = new FormData();\r\n        uploadFile.append(0,attachmentInput[0].files[0]);\r\n        let xhr = new XMLHttpRequest();\r\n\r\n        statusText.html(\"<div class='progress'><div class='percent'></div></div>\");\r\n        xhr.upload.addEventListener(\"progress\", function(evt){\r\n            if (evt.lengthComputable) {\r\n                let percentComplete = Math.round(evt.loaded * 100 / evt.total);\r\n                statusText.css({\"width\":percentComplete*190/100+\"px\"});\r\n                statusText.children(\".progress\").text(percentComplete+\"%\");\r\n            }\r\n        }, false);\r\n        xhr.addEventListener(\"load\", function(evt){\r\n            let result = evt.target.responseText;\r\n            let jsonObject;\r\n            try{\r\n                jsonObject = new myString(result).toJson();\r\n            }catch(e){\r\n                console.log(e.message);\r\n                return;\r\n            }\r\n            if (jsonObject.success == \"true\") {\r\n                alert(\"投递成功\");\r\n            } else {\r\n                alert(\"投递失败:\"+jsonObject.message);\r\n            }\r\n        }, false);\r\n        xhr.addEventListener(\"error\", function(){\r\n            alert(\"投递失败,请检查本地网络是否正常\");\r\n        }, false);\r\n        xhr.addEventListener(\"abort\", function(){\r\n            console.log(\"投递操作已被强行终止\");\r\n        }, false);\r\n        xhr.open(\"POST\", \"../Resume/Send?\"+requestData);\r\n        xhr.send(uploadFile);\r\n    });\r\n\r\n\r\n}"]}