{"version":3,"sources":["select.es6"],"names":[],"mappings":"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","file":"select.js","sourcesContent":["/**\r\n * demo like below\r\n * <div class='select' title='xxx'>\r\n * </div>\r\n */\r\n(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports !== 'undefined') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n\r\n}(function ($) {\r\n    \"use strict\";\r\n    $.fn.select = function (options) {\r\n        return $(this).each(function () {\r\n            select($(this), options);\r\n        });\r\n    };\r\n\r\n    let select = function (element, options) {\r\n\r\n        let settings = element.addonSettingExtend(options, {\r\n            \"name\": element.property(\"name\", \"select\"),\r\n            \"title\": element.property(\"title\", \"\"),\r\n            \"data\": [],\r\n            \"callback\": ()=> {\r\n            }\r\n        });\r\n\r\n        let node = {\r\n            panel(){\r\n                return element.children(\".select-panel\");\r\n            },\r\n            panelHeadCheckbox(){\r\n                return element.xPath(\".select-panel>.select-panel-head>input[type=checkbox]\");\r\n            },\r\n            panelBodyCheckbox(){\r\n                return element.xPath(\".select-panel>.select-panel-body>.group>div>input[type=checkbox]\");\r\n            }\r\n        }\r\n\r\n        let func = {\r\n            setData(){\r\n                let checkedNum = settings.data.filter(d=> {\r\n                    return d.checked;\r\n                }).length;\r\n                let numStr = checkedNum + \"/\" + settings.data.length;\r\n                node.panel().xPath(\".select-panel-head>.text\").text(numStr);\r\n\r\n                node.panel().children(\".select-panel-body\").html(()=> {\r\n                    let panelHtml = \"\";\r\n                    for (let i = 0; i <= settings.data.length / 10; i++) {\r\n                        let end = (i * 10 + 10) < settings.data.length ? ((i * 10 + 10)) : settings.data.length;\r\n                        let currentArr = settings.data.slice(i * 10, end);\r\n\r\n                        panelHtml += \"<div class='group'>\";\r\n                        panelHtml += currentArr.map(d=> {\r\n                            let checkedHtml = d.checked ? \" checked='checked'\" : \"\";\r\n                            d = \"<div optionId='\" + d.id + \"'><input type='checkbox'\" + checkedHtml + \"><div class='text'>\" + d.name + \"</div></div>\";\r\n                            return d;\r\n                        }).join(\"\");\r\n                        panelHtml += \"</div>\";\r\n                    }\r\n                    return panelHtml;\r\n                });\r\n\r\n                node.panelBodyCheckbox().delegate(\"\", \"click\", function () {\r\n                    let optionId = $(this).parent().attr(\"optionId\");\r\n                    settings.data = settings.data.map(d=> {\r\n                        if (d.id == optionId) {\r\n                            d.checked = $(this).prop(\"checked\");\r\n                        }\r\n                        return d;\r\n                    });\r\n                    if (settings.callback != undefined) {\r\n                        settings.callback();\r\n                    }\r\n                });\r\n\r\n                element.data(\"data\", settings.data);\r\n            }\r\n        }\r\n\r\n        element.addonInit(\"select\", ()=> {\r\n\r\n            // build html\r\n            element.append(function () {\r\n                let buttonHtml = \"<button class='button-info'>\" + settings.name + \" <i class='fa fa-check-square-o'></i></button>\";\r\n                let panelHtml = \"<div class='select-panel'>\";\r\n                let allChecked = settings.data.some(d=> {\r\n                    return !d.checked;\r\n                });\r\n                let allCheckedHtml = allChecked ? \"\" : \" checked='checked'\";\r\n                let checkedNum = settings.data.filter(d=> {\r\n                    return d.checked;\r\n                }).length;\r\n                let numStr = checkedNum + \"/\" + settings.data.length;\r\n                panelHtml += \"<div class='select-panel-head'><input type='checkbox'\" + allCheckedHtml + \"><div class='text'>\" + numStr + \"</div></div>\";\r\n                panelHtml += \"<div class='select-panel-body'>\";\r\n                panelHtml += \"</div>\";\r\n                panelHtml += \"</div>\";\r\n                return buttonHtml + panelHtml;\r\n            });\r\n\r\n            func.setData();\r\n\r\n            element.children(\"button\").delegate(\"\", \"click\", function () {\r\n                node.panel().toggle();\r\n            });\r\n\r\n            //listen checkbox\r\n            node.panelHeadCheckbox().delegate(\"\", \"click\", function () {\r\n                settings.data = settings.data.map(d=> {\r\n                    d.checked = $(this).prop(\"checked\");\r\n                    return d;\r\n                })\r\n                node.panelBodyCheckbox().prop(\"checked\", $(this).prop(\"checked\"));\r\n                func.setData();\r\n                settings.callback();\r\n            });\r\n\r\n        });\r\n\r\n        if (options == undefined) {\r\n            return;\r\n        }\r\n\r\n        if (options.data != undefined) {\r\n            func.setData();\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n}));\r\n"]}