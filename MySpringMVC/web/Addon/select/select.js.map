{"version":3,"sources":["select.es6"],"names":[],"mappings":"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","file":"select.js","sourcesContent":["/**\r\n * select js\r\n */\r\n(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports !== 'undefined') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n\r\n}(function ($) {\r\n    \"use strict\";\r\n    $.fn.select = function (options) {\r\n        return this.each(function () {\r\n            select($(this), options);\r\n        });\r\n    };\r\n\r\n    let select = function (element, options) {\r\n\r\n        let settings = element.addonSettingExtend(options, {\r\n            \"title\": element.property(\"title\", \"select\"),\r\n            \"data\": [],\r\n            \"callback\": ()=> {\r\n            }\r\n        });\r\n\r\n        let node = {\r\n            panel(){\r\n                return element.children(\".select-panel\");\r\n            },\r\n            panelHeadCheckbox(){\r\n                return element.xPath(\".select-panel>.select-panel-head>input[type=checkbox]\");\r\n            },\r\n            panelBodyCheckbox(){\r\n                return element.xPath(\".select-panel>.select-panel-body>.group>div>input[type=checkbox]\");\r\n            }\r\n        }\r\n\r\n        let func = {\r\n            setData(){\r\n                element.data(\"data\",settings.data);\r\n            }\r\n        }\r\n\r\n        element.addonInit(\"select\", ()=> {\r\n\r\n            // build html\r\n            element.append(function () {\r\n                let buttonHtml = \"<button class='button-info'>\" + settings.title + \" <i class='fa fa-caret-square-o-down'></i></button>\";\r\n                let panelHtml = \"<div class='select-panel'>\";\r\n                let allChecked = settings.data.some(d=> {\r\n                    return !d.checked;\r\n                });\r\n                let allCheckedHtml = allChecked ? \"\" : \" checked='checked'\";\r\n                panelHtml += \"<div class='select-panel-head'><input type='checkbox'\" + allCheckedHtml + \"><div class='text'>0/0</div></div>\";\r\n                panelHtml += \"<div class='select-panel-body'>\";\r\n                for (let i = 0; i <= settings.data.length / 10; i++) {\r\n                    let end = (i * 10 + 10) < settings.data.length ? ((i * 10 + 10)) : settings.data.length;\r\n                    let currentArr = settings.data.slice(i * 10, end);\r\n\r\n                    panelHtml += \"<div class='group'>\";\r\n                    panelHtml += currentArr.map(d=> {\r\n                        let checkedHtml = d.checked ? \" checked='checked'\" : \"\";\r\n                        d = \"<div optionId='\" + d.id + \"'><input type='checkbox'\" + checkedHtml + \"><div class='text'>\" + d.name + \"</div></div>\";\r\n                        return d;\r\n                    }).join(\"\");\r\n                    panelHtml += \"</div>\";\r\n                }\r\n\r\n                panelHtml += \"</div>\";\r\n                panelHtml += \"</div>\";\r\n                return buttonHtml + panelHtml;\r\n            });\r\n\r\n            element.children(\"button\").delegate(\"\", \"click\", function () {\r\n                node.panel().toggle();\r\n            });\r\n\r\n            //listen checkbox\r\n            node.panelHeadCheckbox().delegate(\"\", \"click\", function () {\r\n                settings.data.map(d=> {\r\n                    d.checked = $(this).prop(\"checked\");\r\n                })\r\n                node.panelBodyCheckbox().prop(\"checked\",$(this).prop(\"checked\"));\r\n                func.setData();\r\n                settings.callback();\r\n            });\r\n            node.panelBodyCheckbox().delegate(\"\", \"click\", function () {\r\n                let optionId = $(this).parent().attr(\"optionId\");\r\n                settings.data.find(d=> {\r\n                    return d.id = optionId;\r\n                }).checked = $(this).prop(\"checked\");\r\n                func.setData();\r\n                settings.callback();\r\n            });\r\n\r\n            //\r\n            // //listen head checkbox\r\n            // head.delegate(\"input[type=checkbox]\", \"click\", function () {\r\n            //     if (data(\"data\") == undefined) {\r\n            //         return;\r\n            //     }\r\n            //\r\n            //     let checkbox = head.children(\"input[type=checkbox]\");\r\n            //     if (checkbox.prop(\"checked\")) {\r\n            //         var d1 = data(\"data\").map(function (d) {\r\n            //             d.checked = true;\r\n            //             return d;\r\n            //         });\r\n            //         data(\"data\", d1);\r\n            //         label.html(\"已选中\" + data(\"data\").length + \"项\");\r\n            //         body.children(\"div\").children(\"input\").prop(\"checked\", true);\r\n            //     } else {\r\n            //         var d1 = data(\"data\").map(function (d) {\r\n            //             d.checked = false;\r\n            //             return d;\r\n            //         });\r\n            //         data(\"data\", d1);\r\n            //         label.html(\"已选中0项\");\r\n            //         body.children(\"div\").children(\"input\").prop(\"checked\", false);\r\n            //     }\r\n            //\r\n            //     if (settings.selectCallback != undefined) {\r\n            //         var callback = settings.selectCallback;\r\n            //         callback();\r\n            //     }\r\n            // });\r\n            //\r\n\r\n        });\r\n\r\n        // // set data\r\n        // if (settings.data != null) {\r\n        //     element.data(\"data\", settings.data);\r\n        //     let data = settings.data;\r\n        //     let bodyHtml = data.map(d=> {\r\n        //         let checkedHtml = d.checked ? \"checked='checked'\" : \"\";\r\n        //         d = \"<div><input type='checkbox' \" + checkedHtml + \">\" + (d.name == undefined ? \"\" : d.name) + \"</div>\";\r\n        //         return d;\r\n        //     }).collect(\"join\", \"\");\r\n        //     body.html(bodyHtml);\r\n        //     let n = data.filter(d=> {\r\n        //         return d.checked;\r\n        //     }).length;\r\n        //     label.html(\"已选中\" + n + \"项\");\r\n        //\r\n        //     //listen checkbox\r\n        //     body.children(\"div\").delegate(\"input[type=checkbox]\", \"click\", ()=> {\r\n        //         let currentData = [];\r\n        //         body.children(\"div\").children(\"input\").each(function () {\r\n        //             currentData.push({\"name\": $(this).parent().text(), \"checked\": $(this).prop(\"checked\")});\r\n        //         });\r\n        //         element.data(\"data\", currentData);\r\n        //         let n = data(\"data\").filter(d=> {\r\n        //             return d.checked;\r\n        //         }).length;\r\n        //         label.html(\"已选中\" + n + \"项\");\r\n        //         if (settings.selectCallback != null) {\r\n        //             let callback = settings.selectCallback;\r\n        //             callback();\r\n        //         }\r\n        //     });\r\n        // }\r\n\r\n        return element;\r\n    }\r\n\r\n}));\r\n"]}