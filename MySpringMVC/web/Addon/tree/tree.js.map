{"version":3,"sources":["tree.es6"],"names":[],"mappings":"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","file":"tree.js","sourcesContent":["/**\r\n * demo like below\r\n * <div class='tree'>\r\n *     <div key='xxx' title='xxx'>\r\n *          <div key=\"xxx\">xxx</div>\r\n *          <div key=\"xxx\">xxx</div>\r\n *     </div>\r\n *     <div key='xxx' title='xxx'>\r\n *     </div>\r\n * </div>\r\n * <div class='tree-panel'>\r\n * </div>\r\n */\r\n(function (factory) {\r\n    'use strict';\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(['jquery'], factory);\r\n    } else if (typeof exports !== 'undefined') {\r\n        module.exports = factory(require('jquery'));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n\r\n}(function ($) {\r\n    'use strict';\r\n    $.fn.tree = function (options) {\r\n        return $(this).each(function(){\r\n            tree($(this), options);\r\n        });\r\n    };\r\n\r\n    let tree = (element, options)=> {\r\n        let settings = element.addonSettingExtend(options, {\r\n            width: element.property(\"width\", 150)\r\n        });\r\n\r\n        element.addonInit(\"tree\", function () {\r\n            element.width(settings.width);\r\n            let key = element.children(\"div\").attr(\"key\");\r\n            let childKey = element.children(\"div\").children(\"div\").attr(\"key\");\r\n            key = key + \"_\" + childKey;\r\n            element.next(\"div\").children(\"div[tree-key=\" + key + \"]\").show();\r\n\r\n            element.append(()=> {\r\n                let html = \"\";\r\n                element.children(\"div[key]\").each(function (i) {\r\n                    let level1Name = $(this).attr(\"key\");\r\n                    let level1Title = $(this).attr(\"title\");\r\n                    let iClass = (i == 0) ? \"fa-minus\" : \"fa-plus\";\r\n                    html += \"<div class='level1' name='\" + level1Name + \"'><i class='fa \" + iClass + \"'></i>\" + level1Title;\r\n                    $(this).children(\"div[key]\").each(function (j) {\r\n                        let level2Name = $(this).attr(\"key\");\r\n                        let level2Title = $(this).text();\r\n                        let activeHtml = (i == 0 && j == 0) ? \" active\" : \"\";\r\n                        html += \"<div class='level2\" + activeHtml + \"' name='\" + level2Name + \"'>\" + level2Title + \"</div>\";\r\n                    });\r\n                    html += \"</div>\";\r\n                })\r\n                return html;\r\n            });\r\n\r\n            element.children(\".level1\").first().children(\".level2\").show();\r\n\r\n            //listen level1 click\r\n            element.children(\".level1\").delegate(\"\", \"click\", function () {\r\n                if($(this).children(\"i\").hasClass(\"fa-plus\")){\r\n                    $(this).children(\"i\").removeClass(\"fa-plus\");\r\n                    $(this).children(\"i\").addClass(\"fa-minus\");\r\n                    $(this).children(\".level2\").slideDown();\r\n                }else{\r\n                    $(this).children(\"i\").removeClass(\"fa-minus\");\r\n                    $(this).children(\"i\").addClass(\"fa-plus\");\r\n                    $(this).children(\".level2\").slideUp();\r\n                }\r\n            });\r\n\r\n            //listen level2 click\r\n            element.xPath(\".level1>.level2\").delegate(\"\",\"click\",function (e) {\r\n                e.stopPropagation();\r\n                element.xPath(\".level1>.level2\").removeClass(\"active\");\r\n                let name = $(this).parent().attr(\"name\");\r\n                let childName = $(this).attr(\"name\");\r\n                name = name + \"_\" + childName;\r\n                window.location.hash = \"#\"+name;\r\n                $(this).addClass(\"active\");\r\n                $(\"div[tree-key]\").hide();\r\n                $(\"div[tree-key=\"+name+\"]\").show();\r\n            })\r\n\r\n            let hash = window.location.hash;\r\n            let find = element.children(\".level1\").children(\".level2\").toArray().find(d=> {\r\n                d = ((\"#\" + d.parent().attr(\"name\") +\"_\" + d.attr(\"name\")) == hash);\r\n                return d;\r\n            });\r\n            if (find != undefined) {\r\n                let level1Name = find.parent().attr(\"name\");\r\n                let level2Name = find.attr(\"name\");\r\n\r\n                let thisLevel1 = element.children(\".level1[name=\"+level1Name+\"]\");\r\n                let thisLevel2 = element.children(\".level1[name=\"+level1Name+\"]\").children(\".level2[name=\"+level2Name+\"]\");\r\n                let otherLevel1 = thisLevel1.siblings(\".level1\");\r\n                let otherLevel1Level2 = otherLevel1.children(\".level2\");\r\n                let thisLevel1OtherLevel2 =thisLevel1.children(\".level2[name!=\"+level2Name+\"]\");\r\n                \r\n                //active\r\n                otherLevel1Level2.removeClass(\"active\");\r\n                thisLevel1OtherLevel2.removeClass(\"active\");\r\n                thisLevel2.addClass(\"active\");\r\n\r\n                //i class\r\n                otherLevel1.children(\"i\").removeClass(\"fa-minus\");\r\n                otherLevel1.children(\"i\").addClass(\"fa-plus\");\r\n                thisLevel1.children(\"i\").removeClass(\"fa-plus\");\r\n                if(!thisLevel1.children(\"i\").hasClass(\"fa-minus\")){\r\n                    thisLevel1.children(\"i\").addClass(\"fa-minus\");\r\n                }\r\n\r\n                //hide and show\r\n                otherLevel1Level2.hide();\r\n                thisLevel1.children(\".level2\").show();\r\n\r\n\r\n                let name = level1Name+\"_\"+level2Name;\r\n                element.next(\".tree-panel\").children(\"div[tree-key=\"+name+\"]\").siblings().hide();\r\n                element.next(\".tree-panel\").children(\"div[tree-key=\"+name+\"]\").show();\r\n\r\n\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n        return element;\r\n    }\r\n\r\n}));"]}